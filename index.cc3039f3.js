function e(e,t,i,n){Object.defineProperty(e,t,{get:i,set:n,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},a={},o=i.parcelRequired7c6;null==o&&((o=function(e){if(e in n)return n[e].exports;if(e in a){var t=a[e];delete a[e];var i={id:e,exports:{}};return n[e]=i,t.call(i.exports,i,i.exports),i.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){a[e]=t},i.parcelRequired7c6=o),o.register("kyEFX",(function(t,i){var n,a;e(t.exports,"register",(function(){return n}),(function(e){return n=e})),e(t.exports,"resolve",(function(){return a}),(function(e){return a=e}));var o={};n=function(e){for(var t=Object.keys(e),i=0;i<t.length;i++)o[t[i]]=e[t[i]]},a=function(e){var t=o[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),o("kyEFX").register(JSON.parse('{"5ZPII":"index.cc3039f3.js","h8U5F":"nocover.141d9355.png"}'));const l=document.querySelector("#cookies-btn"),s=document.querySelector("#cookies");l.addEventListener("click",(()=>{s.style.display="none",((e,t,i)=>{console.log("clicked");let n=new Date;n.setTime(n.getTime()+864e5*i);const a=`expires= ${n.toUTCString()}`;document.cookie=`${e}=${t}; ${a}; path=/ `})("cookie",!0,30)}));const r=document.querySelector(".top-button");r.addEventListener("click",(()=>window.scrollTo({top:0,behavior:"smooth"})));const c=document.querySelector("body"),d=document.querySelector(".footer"),u=document.querySelector(".darkmode-toggle");let m=localStorage.getItem("mode");m&&"dark"===m&&(c.classList.add("dark"),d.classList.add("dark"),u.classList.add("active")),u.addEventListener("click",(()=>{if(c.classList.toggle("dark"),d.classList.toggle("dark"),!c.classList.contains("dark"))return localStorage.setItem("mode","light");localStorage.setItem("mode","dark")})),u.addEventListener("click",(()=>u.classList.toggle("active")));const y=document.querySelector(".js-box"),g=document.querySelector("#library"),p=document.querySelector("#home"),f=document.querySelector(".header");g.addEventListener("click",(e=>{e.preventDefault(),y.innerHTML="",y.innerHTML='<div class="js-box--padding"><button class="btn-watched btn-active" type="button">Watched</button>\n        <button class="btn-queue" type="button">Queue</button></div>',g.classList.add("nav-list__link--active"),p.classList.remove("nav-list__link--active"),f.classList.add("header--bgc")}));var b;b=new URL(o("kyEFX").resolve("h8U5F"),import.meta.url).toString();const v=document.querySelector("ul.MainPage__Grid"),h=document.querySelector("template.GalleryTemplate"),_=document.querySelector("ul.MainPage__Grid"),S=document.querySelector("input.header__input"),E=document.querySelector("button.header__submit"),P=document.querySelector("div.Pagination"),x=document.querySelector("div.Pagination__containerGrid"),k=document.querySelector("ul.Pagination__grid");let L,q,w={api_key:"40ed737db1bcf2c75f234fa073fa8cf6",language:"en-US"},C=1,N=document.querySelector("div[data-add='first']"),T=document.querySelector("div[data-add='last']");const M=e=>{for(let t=0;t<e;t++)v.append(h.content.cloneNode(!0))},j=(e,i)=>{[..._.children].forEach(((n,a)=>{let o,{title:l,name:s,poster_path:r,id:c,genre_ids:d,release_date:u,first_air_date:m}=e[a];const y=`<img class="MainPage__Img skeleton" alt="Poster of movie:${l||s}"  src="${null===r?t(b):`https://image.tmdb.org/t/p/w500${r}`}" data-id="${c}"/>`;[...n.querySelectorAll("*")].forEach((e=>{if(e.classList.contains("MainPage__Img")&&e.remove(),e.classList.contains("ImgWrapper")&&e.insertAdjacentHTML("beforeend",y),e.classList.contains("MainPage__PhotoTitle")&&(e.classList.remove("skeleton__text"),e.textContent=l||s),e.classList.contains("MainPage__PhotoType")){e.classList.remove("skeleton__text"),e.after("|");const t=d.flatMap((e=>i.flatMap((t=>e===t.id?t.name:[]))));o=t.length>=4?t.slice(0,3).join(", ")+" ...":t.join(", "),e.textContent=`${""===o?"No type in database":o}`}if(e.classList.contains("MainPage__PhotoYear")){e.classList.remove("skeleton__text");let t=(u||m)??"No data in database";if("No data in database"===t)return e.textContent=t;e.textContent=t.slice(0,4)}}))}))},$=async(e,t="first")=>{try{"first"===t&&(C=1),e.preventDefault(),v.innerHTML="",w.query=S.value.trim(),w.page=C,e.currentTarget.blur();const i=new URLSearchParams(w);if(""===w.query)return console.log("BRAK DANYCH W INPUCIE");M(20);const n=await fetch(`https://api.themoviedb.org/3/search/movie?${i}`),a=await n.json();if(totalPages=a.total_pages,L=a.total_results,q=a.results.length,q<20){[...v.children].forEach(((e,t)=>{t>=q&&e.remove()}))}const o=a.results,l=await fetch("\nhttps://api.themoviedb.org/3/genre/movie/list?api_key=40ed737db1bcf2c75f234fa073fa8cf6&language=en-US"),s=(await l.json()).genres;j(o,s),(e=>{k.innerHTML="",P.style.display="flex";const t=document.createDocumentFragment();for(let i=0;i<e;i++){const e=document.createElement("li");e.classList.add("Pagination__item"),e.textContent=i+1,t.append(e)}k.append(t),document.querySelector(`.Pagination__item:nth-child(${C})`).classList.add("Pagination__item--active"),totalPages<5?(x.style.width=14*totalPages+16*(totalPages-1)+26+"px",I(0)):(T.textContent=totalPages,T.style.visibility="visible",T.previousElementSibling.style.visibility="visible",T.style.opacity="1",T.previousElementSibling.style.opacity="1",P.lastElementChild.style.transform="translateX(0px)"),totalPages-C<=2&&(T.style.visibility="hidden",T.previousElementSibling.style.visibility="hidden",T.style.opacity="0",T.previousElementSibling.style.opacity="0",P.lastElementChild.style.transform="translateX(-60px)"),C>3?(console.log("e"),P.firstElementChild.style.transform="translateX(0px)",N.style.visibility="visible",N.nextElementSibling.style.visibility="visible",N.style.opacity="1",N.nextElementSibling.style.opacity="1"):(N.style.visibility="hidden",N.nextElementSibling.style.visibility="hidden",N.style.opacity="0",N.nextElementSibling.style.opacity="0",P.firstElementChild.style.transform="translateX(60px)"),1===C?(P.firstElementChild.style.visibility="hidden",P.firstElementChild.style.opacity="0"):(P.firstElementChild.style.visibility="visible",P.firstElementChild.style.opacity="1",console.log(P.firstElementChild)),C===totalPages?(P.lastElementChild.style.visibility="hidden",P.lastElementChild.style.opacity="0"):(P.lastElementChild.style.visibility="visible",P.lastElementChild.style.opacity="1")})(totalPages),"first"===t&&(k.style.transform="translateX(0px)")}catch(e){console.error(e.message,e.code)}},I=e=>{k.style.transform=`translateX(${e}px)`};document.querySelector(".loader-container");window.onscroll=function(){document.body.scrollTop>230||document.documentElement.scrollTop>230?r.style.display="block":r.style.display="none"},(async()=>{try{M(20);const e=await fetch("https://api.themoviedb.org/3/trending/all/week?api_key=40ed737db1bcf2c75f234fa073fa8cf6"),t=(await e.json()).results,i=await fetch("https://api.themoviedb.org/3/genre/movie/list?api_key=40ed737db1bcf2c75f234fa073fa8cf6&language=en-US"),n=(await i.json()).genres;j(t,n)}catch(e){console.error(e.message)}})(),E.addEventListener("click",$),P.addEventListener("click",(e=>{const{nodeName:t,textContent:i,dataset:{page:n}}=e.target;e.preventDefault();let a=k.computedStyleMap().get("transform")[0].x.value;"next"===n&&(C++,$(e,"second")),"previous"==n&&(C--,$(e,"second")),"next"===n&&C>3&&(a-=30,I(a)),"previous"===n&&C>=3&&(a+=30,I(a)),totalPages-C<=2&&"next"===n&&(a=30*-(totalPages-5),I(a)),totalPages-C<2&&"previous"==n&&(a=30*-(totalPages-5),I(a)),"LI"===t&&(C=Number(i),Number(i)>3&&C>=3&&!(totalPages-Number(i))<3&&(a=30*-(Number(i)-3),I(a)),Number(i)<=3&&C>=3&&(a+=30*(3-Number(i)),I(a),console.log("e")),Number(i)<=3&&(a=0,I(a)),totalPages-Number(i)<3&&(a=30*-(totalPages-5),I(a)),$(e,"second")),e.target===N&&(a=0,I(a),C=1,$(e,"second")),e.target===T&&(a=30*-(totalPages-5),I(a),C=totalPages,$(e,"second"))}));
//# sourceMappingURL=index.cc3039f3.js.map
